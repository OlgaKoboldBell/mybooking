<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Додати номер до помешкання</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="/style/5_Business_form/Business_form(add_hotel_styleguide).css" />
    <link rel="stylesheet" href="/style/5_Business_form/Business_form(add_hotel).css" />

    <link rel="stylesheet" href="/style.header/header_styleguide.css" />
    <link rel="stylesheet" href="/style.header/header.css" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/style.footer/footer_styleguide.css" />
    <link rel="stylesheet" href="/style.footer/footer.css" />
    <!-- Подключение стилей Select2 -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />


    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            margin-top: 20px;
        }

        .container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        .mb-4 {
            color: #275271FF;
            font-weight: bold;
            align-content: center;
          
        }

        /*.room-type {*/
        /*    border: 1px solid #ccc;*/
        /*    padding: 20px;*/
        /*    text-align: center;*/
        /*    width: 250px;*/
        /*    margin-bottom: 20px;*/
        /*    border-radius: 8px;*/
        /*    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);*/
        /*}*/

        /*.room-type img {*/
        /*    width: 60px;*/
        /*    height: auto;*/
        /*    margin-bottom: 15px;*/
        /*}*/

        /*.room-type h2 {*/
        /*    font-size: 18px;*/
        /*    margin-bottom: 10px;*/
        /*}*/

        /*.room-type p {*/
        /*    font-size: 14px;*/
        /*    margin-bottom: 20px;*/
        /*}*/

        /*.room-type button {*/
        /*    padding: 10px;*/
        /*    font-size: 14px;*/
        /*    background-color: #275271FF;*/
        /*    color: white;*/
        /*    border: none;*/
        /*    border-radius: 5px;*/
        /*    cursor: pointer;*/
        /*    width: 100%;*/
        /*}*/

        /*.room-type button:hover {*/
        /*    background-color: #1f3d53;*/
        /*}*/
        .logo-component {
            transition: transform 0.3s ease-in-out; /* Плавный переход */
            max-height: 90px;
            margin-right: 10px;
        }

        .logo-component:hover {
            transform: scale(1.1); /* Увеличение на 10% при наведении */
        }
        h3 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }
        .navbar {
            background-color: #275271FF;
            color: white;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.4);
        }

        .auth-buttons {
            color: #ffffff;
            background-color: #E7A188FF;
            display: flex;
            align-items: center;
            margin-right: 200px;
        }

        .navbar-nav .nav-link {
            color: #fff;
            font-size: 1em;
            margin-right: 15px;
        }

        .auth-buttons .btn-light {
            color: #ffffff;
            background-color: #275271FF;
            border: none;
            border-radius: 4px;
            font-size: 1em;
            padding: 5px 10px;
            cursor: pointer;
        }

        .dropdown-menu {
            color: #ffffff;
            background-color: #E7A188FF;
            border: none;
            max-width: 250px;
            max-height: 300px;
            overflow-y: auto;
            white-space: nowrap;
        }

        .dropdown-menu a {
            color: #ffffff;
            background-color: #275271FF;
        }

        .dropdown-menu a:hover {
            background-color: #9a9998;
            color: black;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
        }

        .button {
            display: flex;
            justify-content: space-between;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.4);
        }

        .button button {
            padding: 10px 20px;
        }


        .type {
            /*background-color: #f1f0ef;*/
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Позволяет разместить элементы в карточке равномерно */
            border: 1px solid #ccc;
            padding: 20px;
            text-align: center;
            width: 220px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);


        }

        .type img {
            width: 50px; /* Размер изображения */
            height: auto;
            margin-bottom: 15px;
        }

        .type h2 {
            font-size: 20px;
            font-weight: bold; /* Делает текст жирным */
            margin-bottom: 10px;
            color: #275271FF;
        }

        .type p {
            font-size: 14px;
            margin-bottom: 20px;
            flex-grow: 1; /* Заставляем текст занимать оставшееся пространство */
        }


        .type button {
            padding: 10px;
            font-size: 14px;
            background-color: #275271FF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            margin-top: auto; /* Автоматически размещает кнопку внизу карточки */
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.4);
        }

        .type button:hover {
            background-color:#E7A188FF;
        }

        footer {
            background-color: #275271FF;
            color: white;
            padding: 20px 0;
        }

        .footer-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            align-items: center;
        }

        .footer-section {
            text-align: center;
            margin-bottom: 15px;
        }

        .footer-section h4 {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .footer-section p, .footer-section a {
            font-size: 14px;
            color: white;
            text-decoration: none;
        }

        .footer-section a:hover {
            text-decoration: underline;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 10px;
        }

        .button {
            display: flex;
            justify-content: space-between;
        }

        .button .prev-button, .button .next-button {
            padding: 10px 20px;
            border-radius: 5px;
            border: 1px solid transparent;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .button .prev-button {
            background-color: transparent;
            border: 1px solid #275271FF;
            color: #275271FF;
            display: flex;
            align-items: center;
        }

        .button .prev-button svg {
            margin-right: 5px;
        }

        .button .next-button {
            background-color: #275271FF;
            color: white;
        }

        .button .prev-button:hover {
            background-color: #275271FF;
            color: white;
        }

        .button .next-button:hover {
            background-color: #275271FF;
        }
        /*!* Контейнер для всех удобств *!*/

        /*///////////////////////////////////////////////*/
        .amenities-container {
            display: flex;
            gap: 80px; /* Пространство между категориями */
            margin-bottom: 20px;
            justify-content: center; /* Разместить блоки равномерно */
            align-items: flex-start; /* Выровнять по верху */
        }

        .amenities-group {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            width: 100%;
        }

        .amenities-header {
            font-size: 1.2rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            color: #275271FF;
        }
        .amenities-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            justify-content: space-between;
        }
        .amenities-list label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 5px 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            white-space: nowrap; /* Запрещает перенос текста на следующую строку */
        }
        .amenities-list label:hover {
            background-color: #e9ecef;
        }
        .amenities-list input[type="checkbox"] {
            margin-right: 10px;
            accent-color: #275271FF;
            cursor: pointer;
        }

        .amenities-group h5 {
            margin-bottom: 10px;
            font-weight: bold;
        }

        .amenities-group label {
            display: block;
            margin-bottom: 10px;
        }

        .amenities-group input[type="checkbox"] {
            margin-right: 10px;
        }
        .cover-image-preview img {
            width: 100%;
            max-height: 400px;
            object-fit: cover; /* Избегаем растяжения изображения */
        }

        #imagePreview img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .price-section input {
            width: 200px;
            margin-top: 10px;
            text-align: center;
        }


    </style>
</head>
<body>
<header>
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="HEADER-desktop">
            <div class="frame">
                <div class="frame">
                    <a class="nav-link" href="/"><span> <img class="logo-component" src="/images/logo1.png" alt="Arrenvi Logo" style="max-height: 50px;"/></span></a>
                </div>
            </div>
        </div>

        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">

                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/languages"> <img src="/images/ukraine.png" alt="Ukraine"> <span th:text="${session.language}"></span></a>
                    </li>
                    <div class="auth-buttons">
                        <div class="dropdown">
                            <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                                <span th:text="${session.userName}"></span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <li><a class="dropdown-item" href="/home_partners">Головна</a></li>
                                <li><a class="dropdown-item" href="/hotels/hotels_by_partner" >Переглянути мої помешкання</a></li>
                                <li><a class="dropdown-item" href="/partners/logout">Вийти</a></li>
                            </ul>
                        </div>
                    </div>
                </ul>
            </div>
        </div>
    </nav>
</header>

<!--Шаг 1: Имя отеля и тип жилья
В этом шаге пользователь вводит название отеля и выбирает тип жилья (housingType).
Поля обязательны для заполнения, и если какое-то из них не заполнено, будет показано сообщение об ошибке. action="/rooms/add"-->
<form th:action="@{/rooms/partnerroomadd}" method="post" enctype="multipart/form-data">

    <input type="hidden" id="hotelId" name="hotelId" th:value="${hotelId}"  />
    <div id="step-1" class="step active">
<!--        <div th:text="${hotel.id}">Hotel ID</div>-->

<!--        <input type="hidden" id="type" name="type" value="1" />-->
        <!-- Название отеля -->
        <div class="field-with-label">
            <h2 class="mb-4">Обери тип номеру який бажаєш зареєструвати</h2>
        </div>
        <!-- Тип номера -->
        <div class="container">
            <div class="type">
                <h2>Номер для ВПО</h2>
                <p>ДОБРО ОБ'ЄДНУЄ ЛЮДЕЙ. Безкоштовний номер для внутрішньо перемішених осіб (ВПО).</p>
                <button type="button" onclick="selectRoomType('Номер для ВПО')">Обрати</button>
            </div>
            <div class="type">
                <h2>Одномісний номер</h2>
                <p>Номер розрахований на одну людину. У номері зазвичай знаходиться односпальне ліжко.</p>
                <button type="button" onclick="selectRoomType('Одномісний номер')">Обрати</button>
            </div>

            <!-- Двомісний номер з одним ліжком -->
            <div class="type">
                <h2>Двомісний номер</h2>
                <p>Номер для двох осіб з одним двоспальним ліжком (зазвичай queen-size або king-size).</p>
                <button type="button" onclick="selectRoomType('Двомісний номер')">Обрати</button>
            </div>

            <!-- Тримісний номер -->
            <div class="type">
                <h2>Тримісний номер</h2>
                <p>Номер для трьох осіб, зазвичай з трьома окремими ліжками або однією двоспальною і односпальною ліжками.</p>
                <button type="button" onclick="selectRoomType('Тримісний номер')">Обрати</button>
            </div>

            <!-- Чотиримісний номер -->
            <div class="type">
                <h2>Чотиримісний номер</h2>
                <p>Номер для чотирьох осіб, з чотирма окремими ліжками або комбінацією двоспальних та односпальних ліжок.</p>
                <button type="button" onclick="selectRoomType('Чотиримісний номер')">Обрати</button>
            </div>

            <!-- Сімейний номер -->
            <div class="type">
                <h2>Сімейний номер</h2>
                <p>Номер для сімей з дітьми, зазвичай більший за площею, може мати кілька ліжок або диван-ліжко.</p>
                <button type="button" onclick="selectRoomType('Сімейний номер')">Обрати</button>
            </div>

            <!-- Студія -->
            <div class="type">
                <h2>Студія</h2>
                <p>Номер, що поєднує спальню та вітальню, зазвичай з міні-кухнею.</p>
                <button type="button" onclick="selectRoomType('Студія')">Обрати</button>
            </div>

            <!-- Сьют -->
            <div class="type">
                <h2>Кімната у будинку</h2>
                <p>У будинку можна орендувати одну кімнату.</p>
                <button type="button" onclick="selectRoomType('Кімната у будинку')">Обрати</button>
            </div>
            <!-- <Будинок> -->
            <div class="type">
                <h2>Будинок цілком</h2>
                <p>Номер з окремою спальнею та вітальнею. Різні варіанти сьютів можуть мати різні розміри та умови.</p>
                <button type="button" onclick="selectRoomType('Будинок цілком')">Обрати</button>
            </div>

            <!-- Апартаменти -->
            <div class="type">
                <h2>Апартаменти</h2>
                <p>Номер з декількома кімнатами (спальня, вітальня, кухня), розрахований на довгострокове проживання.</p>
                <button type="button" onclick="selectRoomType('Апартаменти')">Обрати</button>
            </div>

            <!-- Делюкс -->
            <div class="type">
                <h2>Делюкс</h2>
                <p>Номер з підвищеною комфортністю та поліпшеним дизайном, зазвичай більший за стандартні номери.</p>
                <button type="button" onclick="selectRoomType('Делюкс')">Обрати</button>
            </div>

            <!-- Пентхаус -->
            <div class="type">
                <h2>Пентхаус</h2>
                <p>Номер на верхньому поверсі готелю з панорамним видом та розкішними умовами проживання.</p>
                <button type="button" onclick="selectRoomType('Пентхаус')">Обрати</button>
            </div>

            <!-- Номер для людей з обмеженими можливостями -->
            <div class="type">
                <h2>Номер для людей з обмеженими можливостями</h2>
                <p>Номери зі зручностями для людей з обмеженими можливостями: ширші двері, поручні, пандуси тощо.</p>
                <button type="button" onclick="selectRoomType('Номер для людей з обмеженими можливостями')">Обрати</button>
            </div>

            <!-- Елітний номер -->
            <div class="type">
                <h2>Елітний номер</h2>
                <p>Номер для бізнес-подорожей з додатковими зручностями, такими як робоче місце та доступ до бізнес-залів.</p>
                <button type="button" onclick="selectRoomType('Елітний номер')">Обрати</button>
            </div>

            <!-- Номер для молодят -->
            <div class="type">
                <h2>Номер для молодят</h2>
                <p>Спеціальний номер для молодят з романтичною атмосферою.</p>
                <button type="button" onclick="selectRoomType('Номер для молодят')">Обрати</button>
            </div>
            <!-- Скрытое поле для хранения выбранного типа-->
            <input type="hidden" id="type" name="type" value="1" />
        </div>

    </div>


    <!--Шаг 2: Цена, вместимость и удобства-->
    <div id="step-2" class="step">
<!--        <input type="hidden" id="step_" name="step" value="2" />-->
        <!-- Динамическое отображение удобств -->
        <!-- Удобства по категориям -->
        <div class="profile-row">
            <div class="profile-label"><h3>Додайте зручності</h3></div>
            <div class="amenities-container">
                <!-- Колонка для зручностей в номері -->
                <div class="amenities-group">
                    <h5 class="amenities-header">У номері</h5>
                    <div class="amenities-list">
                        <label th:each="amenity : ${amenities}" th:if="${amenity.type == 'room'}">
                            <input type="checkbox" name="amenities" th:value="${amenity.id}" th:checked="${hotel.amenities.contains(amenity)}">
                            <span th:text="${amenity.name}"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <!-- Цена -->
        <div class="view-3">
            <p class="text-wrapper-11">Вартість (вкажіть вартість за добу)</p>
            <input type="number" id="price" name="price" class="form-control" placeholder="Вкажіть ціну за ніч" required />
            <div class="text-wrapper-17">UAH</div>
        </div>

        <!-- Добавляем поле для вместимости номера -->
        <div class="view-3 mt-3">
            <p class="text-wrapper-11">Вмістимість (вкажіть кількість осіб)</p>
            <input type="number" id="capacity" name="capacity" class="form-control" placeholder="2" required />
        </div>
        <div class="button">
            <button type="button" class="prev-button" onclick="prevStep(1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M5.854 11.854a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 0 1 0-.708l3.5-3.5a.5.5 0 0 1 .708.708L2.707 7.5H14.5a.5.5 0 0 1 0 1H2.707l3.147 3.146a.5.5 0 0 1 0 .708z"/>
                </svg>

            </button>
            <button type="button" class="next-button" onclick="nextStep(3)">Продовжити</button>
        </div>
    </div>

    <!--Шаг 3: Изображения и описание
    Пользователь загружает изображения и добавляет описание объекта.-->
    <div id="step-3" class="step">

        <input type="hidden" id="step" name="step" value="2" />

        <!-- Загрузка изображений -->
        <div class="frame-10">
            <p class="text-wrapper-26">Додайте фотографії та опис </p>

            <!-- Поле для выбора обложки -->
            <label for="coverImage">Головне фото </label>
            <input type="file" id="coverImage" name="coverImage" accept="image/*"  class="form-control" onchange="handleCoverImage(this.files)" />

            <!-- Превью для обложки -->
            <div id="coverImagePreview" class="cover-image-preview mt-3"></div>

            <!-- Поле для выбора остальных изображений -->
            <label for="imageFiles">Додайте ще декілька фото, щоб орендар мав змогу роздивитися всі перевари :</label>
            <input type="file" id="imageFiles" name="imageFiles" accept="image/*" multiple class="form-control" onchange="handleImages(this.files)" />

            <!-- Контейнер для отображения загруженных изображений -->
            <div id="imagePreview" class="row mt-3"></div>


            <!-- Описание -->
            <div class="frame-10">
                <textarea class="form-control" id="description" name="description" placeholder="Додайте короткий опис (до 2500 символів)" rows="5" required></textarea>
                <!--        <textarea id="description" name="description" class="form-control" placeholder="Додайте короткий опис (до 2500 символів)" rows="5"></textarea>-->
            </div>
            <div class="button">
                <button type="button" class="prev-button" onclick="prevStep(2)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M5.854 11.854a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 0 1 0-.708l3.5-3.5a.5.5 0 0 1 .708.708L2.707 7.5H14.5a.5.5 0 0 1 0 1H2.707l3.147 3.146a.5.5 0 0 1 0 .708z"/>
                    </svg>
                </button>
            </div>
            <div class="button">
                <button class="next-button" type="submit">Зберегти</button>
            </div>
        </div>
    </div>

</form>

<footer>
    <div class="footer-container">
        <div class="footer-section">
            <h4><a class="nav-link" href="/support">Тех. підтримка</a></h4>
            <p>Найпопулярніші питання</p>
            <p>+380 97 255 220</p>
            <p>Arrenvi@gmail.com</p>
        </div>
        <div class="footer-section">
            <h4>Для бізнесу</h4>
            <p><a href="/hotels/add">Зареєструвати помешкання</a></p>
        </div>
        <div class="footer-section">
            <h2><a class="nav-link" href="/about_us">Про нас</a></h2>
            <h4>Ми в соц мережах:</h4>
            <a href="#"><img class="img" src="/images/instagram.png" /></a>
            <a href="#"><img class="img" src="/images/facebook.png" /></a>
        </div>
        <div class="footer-section">
            <p><a href="#">Версія для мобільних пристроїв</a></p>
        </div>
    </div>
    <div class="footer-bottom">
        <a class="nav-link" href="/"><p><span> <img class="logo-component" src="/images/logo1.png" alt="Arrenvi Logo" style="max-height: 30px;"/></span> Всі права захищені 2024</p></a>
    </div>
</footer>
<!-- Подключите jQuery перед использованием Select2 -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- Подключение скрипта Select2 -->
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<!-- Подключение Bootstrap JS и Popper.js -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<!-- Bootstrap JS (необходим для работы модальных окон) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>

    function handleCoverImage(files) {
        const previewContainer = document.getElementById('coverImagePreview');
        previewContainer.innerHTML = ''; // Очищаем контейнер перед загрузкой новой обложки

        if (files.length === 0) {
            previewContainer.innerHTML = '<p>Обложка не выбрана</p>';
        } else if (files.length > 1) {
            alert('Пожалуйста, выберите только одно изображение для обложки.');
        } else {
            const file = files[0];
            if (file.size > 10 * 1024 * 1024) { // Ограничение на 5 МБ
                alert('Размер файла не должен превышать 5 МБ.');
                return;
            }

            const reader = new FileReader();
            reader.onload = function (e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                img.classList.add('img-thumbnail');
                img.style.maxHeight = '400px'; // Ограничение по высоте
                previewContainer.appendChild(img);
            };
            reader.readAsDataURL(file);
        }
    }

    // Функция для отображения превью дополнительных изображений
    function handleImages(files) {
        const previewContainer = document.getElementById('imagePreview');

        // Ограничение на количество загружаемых изображений (5 штук)
        if (files.length > 5) {
            alert('Вы можете загрузить не более 5 изображений.');
            return;
        }

        // Добавляем новые изображения без очистки предыдущих
        Array.from(files).forEach(file => {
            if (file.size > 10 * 1024 * 1024) { // Ограничение на 5 МБ
                alert('Размер каждого файла не должен превышать 5 МБ.');
                return;
            }

            const reader = new FileReader();
            reader.onload = function (e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                img.classList.add('img-thumbnail');
                img.style.width = '150px';
                img.style.height = '150px';
                img.style.objectFit = 'cover';
                img.style.marginRight = '10px';

                // Добавляем изображение в контейнер, не очищая его
                previewContainer.appendChild(img);
            };
            reader.readAsDataURL(file);
        });
    }

</script>


<!--позволяет выбрать тип жилья и установить его в скрытом поле формы.-->
<script>
    function selectRoomType(type) {
        // Устанавливаем значение в скрытое поле для параметра type
        document.getElementById('type').value = type;

        // Переходим на следующий шаг (например, шаг 2 для ввода цены и вместимости)
        nextStep(2);
    }

// Функция для перехода на следующий шаг
    function nextStep(step) {
        if (step === 3) {
            // Проверка, что поле цены не пусто
            var price = document.getElementById('price').value;
            if (!price) {
                alert("Будь ласка, введіть ціну перед тим як продовжити.");
                return;
            }
            // Также можно добавить проверку для вместимости, если необходимо
            var capacity = document.getElementById('capacity').value;
            if (!capacity) {
                alert("Будь ласка, введіть кількість осіб перед тим як продовжити.");
                return;
            }
        }
        // Переход на следующий шаг
        document.querySelector('.step.active').classList.remove('active');
        document.getElementById('step-' + step).classList.add('active');
    }
    // Функция для перехода на предыдущий шаг
    function prevStep(step) {
        // Деактивируем текущий шаг
        document.querySelector('.step.active').classList.remove('active');
        // Активируем предыдущий шаг
        document.getElementById('step-' + step).classList.add('active');
        // Устанавливаем значение шага в скрытое поле
        document.getElementById('step').value = step;
    }


</script>

<!--Обработчик для кнопки "Зареєструвати помешкання"-->
<script>

    // Функция для отправки формы на последнем шаге (4 шаг)
    function submitForm() {
        // Устанавливаем значение шага для отправки формы
        document.getElementById('step').value = 3;

        // Получаем форму по ID
        var form = document.getElementById('form-step');
        if (!form) {
            alert("Форма не найдена. Проверьте правильность ID формы.");
            return;
        }
        var formData = new FormData(form);
        // AJAX-запрос для отправки формы с изображениями
        fetch('/hotels/add', {
            method: 'POST', // Уберите лишнюю точку
            body: formData
        }).then(response => {
            if (response.ok) {
                window.location.href = '/hotels/hotels_by_partner';
            } else {
                // Попытка обработать ошибку и показать сообщение пользователю
                return response.json().then(data => {
                    alert("Ошибка при регистрации: " + (data.message || "Пожалуйста, попробуйте снова."));
                }).catch(() => {
                    alert("Произошла ошибка при регистрации. Пожалуйста, попробуйте снова.");
                });
            }
        }).catch(error => {
            console.error('Ошибка при отправке формы:', error);
            alert("Ошибка при отправке формы. Проверьте подключение к интернету и попробуйте снова.");
        });
    }
</script>


</body>
</html>